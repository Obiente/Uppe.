---
import type { ICONS } from '$lib/design-system';
import Card from './Card.astro';
import Icon from './Icon.astro';

export interface Props {
  title: string;
  value: string;
  icon: keyof typeof ICONS; // Iconify icon name
  change?: string;
  changeType?: 'positive' | 'negative' | 'neutral';
  variant?: 'default' | 'gradient' | 'minimal';
  class?: string;
}

const { title, value, icon, change, changeType = 'neutral', variant = 'default', class: className = '' } = Astro.props;

const changeColorMap = {
  'positive': 'text-status-success',
  'negative': 'text-status-error',
  'neutral': 'text-primary'
};

const variantStyles = {
  default: {
    cardVariant: 'default' as const,
    iconBg: 'bg-tertiary',
    iconColor: 'text-accent-primary'
  },
  gradient: {
    cardVariant: 'elevated' as const,
    iconBg: 'bg-interactive-primary',
    iconColor: 'text-inverse'
  },
  minimal: {
    cardVariant: 'outlined' as const,
    iconBg: 'bg-bg-elevated',
    iconColor: 'text-primary'
  }
};

const style = variantStyles[variant];
---

<Card variant={style.cardVariant} class={className}>
  <div class="p-4">
    <div class="flex items-center justify-between mb-4">
      <div class={`${style.iconBg} w-12 h-12 p-2 rounded-xl shadow-lg flex items-center justify-center`}>
        <Icon icon={icon} class={`w-6 h-6 ${style.iconColor}`} />
      </div>
      <div class="text-right">
        <div class="text-3xl font-bold text-primary mb-1">{value}</div>
        <div class="text-secondary text-sm font-medium">{title}</div>
      </div>
    </div>
    {change && (
      <div class={`${changeColorMap[changeType]} text-sm font-medium`}>
        {change}
      </div>
    )}
  </div>
</Card>
