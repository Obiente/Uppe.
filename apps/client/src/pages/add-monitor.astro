---
import { Header } from "$components";
import Layout from "$layouts/Layout.astro";
import {
  Section,
  Card,
  CardBody,
  Heading,
  Paragraph,
  Input,
  Select,
  Textarea,
  Toggle,
  Button,
  FormGroup,
  Icon,
  Label,
} from "$ui";
---

<Layout
  title="Add Monitor - Uppe."
  description="Add a new monitor to your Uppe. dashboard"
>
  <Header title="Uppe." />

  <main class="min-h-screen">
    <Section>
      <Heading level={1} class="mb-2">Add New Monitor</Heading>
      <Paragraph class="text-secondary"
        >Configure a new service to monitor through our P2P network</Paragraph
      >
    </Section>

    <Section>
      <Card>
        <CardBody>
          <form class="space-y-6">
            <!-- Basic Information -->
            <div>
              <Heading level={2} class="mb-4">Basic Information</Heading>
              <div class="space-y-4">
                <FormGroup>
                  <Label for="monitorName">Monitor Name</Label>
                  <Input
                    id="monitorName"
                    type="text"
                    placeholder="My Website"
                  />
                </FormGroup>
                <FormGroup>
                  <Label for="url">URL to Monitor</Label>
                  <Input
                    id="url"
                    type="url"
                    placeholder="https://example.com"
                  />
                </FormGroup>
                <FormGroup>
                  <Label for="description">Description (Optional)</Label>
                  <Textarea
                    id="description"
                    placeholder="Brief description of this service..."
                    rows={3}
                  />
                </FormGroup>
              </div>
            </div>

            <!-- Monitor Settings -->
            <div>
              <Heading level={2} class="mb-4">Monitor Settings</Heading>
              <div class="space-y-4">
                <FormGroup>
                  <Label for="checkInterval">Check Interval</Label>
                  <Select id="checkInterval">
                    <option>30 seconds</option>
                    <option>1 minute</option>
                    <option>5 minutes</option>
                    <option>10 minutes</option>
                  </Select>
                </FormGroup>
                <FormGroup>
                  <Label for="timeout">Timeout (seconds)</Label>
                  <Input id="timeout" type="number" value="30" />
                </FormGroup>
                <FormGroup>
                  <Label for="monitorType">Monitor Type</Label>
                  <Select id="monitorType">
                    <option>HTTP/HTTPS</option>
                    <option>TCP Port</option>
                    <option>Ping (ICMP)</option>
                    <option>DNS</option>
                  </Select>
                </FormGroup>
              </div>
            </div>

            <!-- P2P Network Settings -->
            <div>
              <Heading level={2} class="mb-4">P2P Network Settings</Heading>
              <div class="space-y-4">
                <FormGroup>
                  <Label for="peerSelection">Peer Selection Preference</Label>
                  <Select id="peerSelection">
                    <option>Geographic Diversity (Recommended)</option>
                    <option>Closest Peers Only</option>
                    <option>High Reputation Peers</option>
                    <option>Random Selection</option>
                  </Select>
                </FormGroup>
                <FormGroup>
                  <Label for="minConfirmations"
                    >Minimum Peer Confirmations</Label
                  >
                  <Input
                    id="minConfirmations"
                    type="number"
                    value="3"
                    min="1"
                    max="10"
                  />
                  <Paragraph class="text-secondary text-xs mt-1">
                    Number of peers required to confirm status before triggering
                    alerts
                  </Paragraph>
                </FormGroup>
                <FormGroup>
                  <Label for="targetCoverage">Target Peer Coverage</Label>
                  <Input
                    id="targetCoverage"
                    type="number"
                    value="15"
                    min="5"
                    max="50"
                  />
                  <Paragraph class="text-secondary text-xs mt-1">
                    Number of peers to actively monitor this service
                  </Paragraph>
                </FormGroup>
                <Toggle
                  id="fallbackMonitoring"
                  label="Fallback Monitoring"
                  description="Continue monitoring even when your node is offline"
                  checked={true}
                />
              </div>
            </div>

            <!-- Alert Settings -->
            <div>
              <Heading level={2} class="mb-4">Alert Settings</Heading>
              <div class="space-y-4">
                <Toggle
                  id="emailAlerts"
                  label="Email Alerts"
                  description="Send email when monitor goes down"
                  checked={true}
                />
                <Toggle
                  id="webhookNotifications"
                  label="Webhook Notifications"
                  description="Send POST request to webhook URL"
                  checked={false}
                />
                <FormGroup class="hidden">
                  <Label for="webhookUrl">Webhook URL</Label>
                  <Input
                    id="webhookUrl"
                    type="url"
                    placeholder="https://your-webhook-url.com"
                  />
                </FormGroup>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-end gap-4 pt-6">
              <Button variant="secondary" type="button"> Cancel </Button>
              <Button
                variant="primary"
                type="submit"
                class="flex items-center gap-2"
              >
                <Icon icon="ADD"/>
                Create Monitor
              </Button>
            </div>
          </form>
        </CardBody>
      </Card>
    </Section>
  </main>
</Layout>
